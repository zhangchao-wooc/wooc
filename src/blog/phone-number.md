# 由手机号码引起对用户实际使用的思考

## 前言
最初 app 注册登录只支持邮箱，随着全球客户的使用需求，我们开始支持手机号码注册登录。但是随之而来的问题就是，如何保证手机号码的唯一性，以及如何保证手机号码的真实性。

## 问题
第一版实现，参考已有的实现方案，如 Titok、Temu、Google 等实现方案，在前端输入时不做任何限制，由后端校验手机号码的有效性。
有一个用户在注册手机号码时习惯性的输入 915-315-0525 这种格式的号码，而我们在最初开发时只考虑到了前端保持与已有方案一致，而后端没有校验，导致用户注册失败，无法完成注册。
注册失败是个必然结果，这是由于我调研后单方面实现，没有与后端及时沟通达成一致。

## 讨论

> 有些时候不能只从解决问题的角度考虑。而是要考虑为什么，怎么做最合适。


### 我的调研和想法

而我的前期调研结果是会有极少一些国家的手机号带有字母，且有在输入手机号时手动输入 - 或者 （）作为间隔符的习惯的，这一点我是与部分出差其他国家的同事确定过的，他们常用的国外软件是支持这种写法的，包括客户的使用习惯也是如此。

同时可能出现大家习惯性的复制粘贴，而粘贴的手机号码自带格式，这一点可以参考各电商网站对黏贴板中地址的解析，非常方便。

比如谷歌账号的手机号绑定就是可以输入任何的字符，包括 - 或者 （）作为间隔符。在发送短信时通过谷歌的工具库 进行校验和过滤。

Temu 前端输入也没有任何限制，手机号码的校验是通过接口发送给后端进行格式校验的，这种方式不是很好。

Titok 前端输入也没有任何限制，手机号码出现非数字的符号时是会提醒手机号码格式不正确的，其实也是限制为只能输入数字，感觉还不如设置为只能输入数字的体验更好，对用户输入之后的提示更明确。

同时又很多开源项目支持手机号的校验和 E.164 标准的转换，所以在实现上并不会加大工作量，非常方便。

由此我得出的结论是保留用户习惯，使得用户可以输入任何字符，由前端校验手机号码的有效性，而由后端校验手机号码的唯一性。

### 大家的想法
注册失败的问题出现了，大家开始讨论，如何解决这个问题。

由于我们使用的是 AWS 的 sns 服务去发送短信，而 SDK 对手机号码的定义为符合 E.164 标准的号码（既包含 + 和不超过 15 位的数字）。

这时多数人的第一反应是，增加手机号码的校验规则，如只允许输入数字，长度为 11 位，同时拿国内应用的手机号注册举例，没有考虑到用户国家的多样性，这应用是不合适作为这件事的案例的。

但大家没有注意到的是，这个 SDK 也提供了一个验证手机号码是否有效的接口，也就是可以在保持用户输入习惯的基础上，如校验这个手机号码是否符合 E.164 标准，同时给出转换后的手机号、国家码、国窖标记等结果。

同时这些建议和想法是建立在没有足够的前期调研和相关知识的情况下，大部分情况下是臆想，没有任何实际意义，反而会误导决策和导致后续问题的出现。

**其实大家提到的纯数字的方案是可以解决这个问题，但仅仅是从技术实现上，而并非换位思考作为用户实际操作考虑，同时缺乏前置的调研和相关的知识，下意识的拍脑袋决定。**

## 最后
我相信很多时候技术同事是这样的，有些决定是欠缺充分考虑的，而造成这种问题的重要前提是没有足够的相关的知识，习惯性的“我觉的”, 做用户产品，尤其是设计全球用户的产品的环境是复杂的，是需要有足够的相关知识，才能做出正确的决定。



